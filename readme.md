
# 微信AI助力小工具项目  

## 一、项目目的  
本项目旨在基于微信生态打造轻量级工具集合，通过模块化设计实现**个人事务管理、健康数据追踪、投资辅助决策**等核心功能。目标是提供**易搭建、易扩展、易维护**的开发框架，方便开发者快速上手并根据需求新增功能模块，同时为用户提供便捷的智能化服务。  


## 二、项目简介  
本项目基于微信测试公众号开发，旨在为用户提供便捷的个人事务管理、健康数据追踪以及投资辅助决策功能。通过简单的指令交互，实现定时任务设置、体重数据记录分析和网格交易提醒等实用功能。  


## 三、技术栈  
1. **后端开发**：Python + Flask  
2. **数据库**：MySQL 8.0  
3. **定时任务**：APScheduler  
4. **数据可视化**：Matplotlib  
5. **AI服务**：第三方大模型API（如讯飞星火）  
6. **接口调试**：Swagger  
7. **项目配置**：Tree Cursor  


## 四、项目结构  
```  
project-root/  
├─ app/  
│  ├─ __init__.py         # Flask 应用初始化  
│  ├─ wechat/             # 微信接口处理模块  
│  │  ├─ views.py         # 消息接收与回复逻辑  
│  │  └─ handlers.py      # 指令解析函数  
│  ├─ modules/            # 核心功能模块  
│  │  ├─ scheduler/       # 定时任务模块  
│  │  │  ├─ models.py     # 任务数据模型  
│  │  │  └─ tasks.py      # 任务调度逻辑  
│  │  ├─ weight/          # 体重数据模块  
│  │  │  ├─ models.py     # 体重数据模型  
│  │  │  └─ charts.py     # 绘图逻辑  
│  │  └─ trading/         # 网格交易模块  
│  │     ├─ models.py     # 交易策略模型  
│  │     └─ alerts.py     # 价格监控与提醒  
│  └─ utils/              # 通用工具函数  
│     ├─ database.py      # MySQL 连接与操作封装  
│     └─ ai_client.py     # AI 接口调用封装  
├─ config/  
│  └─ settings.py         # 项目配置文件（数据库连接、微信密钥等）  
├─ static/                # 静态资源（如生成的图表图片）  
├─ tests/                 # 单元测试用例  
└─ docs/                  # Swagger 接口文档  
```  


## 五、功能介绍  
1. **定时任务**：用户通过指令设置定时任务（如`#设置定时 每日7点推送今日待办`），系统按设定时间自动推送任务内容。  
2. **体重数据管理**：用户发送体重记录指令（如`#体重记录 65.32kg 饭前`），系统记录数据并支持生成体重变化折线图（`#体重图表`）。  
3. **网格交易提醒**：用户设置股票追踪和价格提醒（如`#网格交易设置 追踪AAPL，跌到150美元提醒`），系统实时监控并推送AI投资建议。  


## 六、数据库表结构  
1. **users**：  
   - `id`（主键）  
   - `openid`（微信用户唯一标识）  
   - `nickname`（昵称）  
2. **scheduled_tasks**：  
   - `id`（主键）  
   - `user_id`（关联`users`表）  
   - `task_content`（任务内容）  
   - `trigger_time`（触发时间）  
   - `status`（任务状态）  
3. **weight_records**：  
   - `id`（主键）  
   - `user_id`（关联`users`表）  
   - `weight`（体重值）  
   - `record_time`（记录时间）  
   - `type`（记录类型，如饭前、饭后等）  
4. **trading_strategies**：  
   - `id`（主键）  
   - `user_id`（关联`users`表）  
   - `stock_code`（股票代码）  
   - `target_price`（目标价格）  
   - `ai_suggestion`（AI建议）  
   - `status`（策略状态）  


## 七、可维护性与扩展性  
### **当前设计优势**  
1. **模块化设计**：各功能模块独立，耦合度低，便于新增功能（如“习惯打卡”模块）。  
2. **接口标准化**：使用Swagger规范接口，支持前后端分离协作。  
3. **配置驱动**：通过`config/settings.py`管理环境参数，支持快速切换开发/生产环境。  

### **待优化项（规划中）**  
1. **自动化搭建**：  
   - 添加`requirements.txt`依赖清单，支持`pip install -r requirements.txt`一键安装。  
   - 开发数据库初始化脚本（如`python manage.py init_db`），自动创建表结构。  
   - 提供Docker部署方案（`Dockerfile`+`docker-compose.yml`）。  
2. **扩展机制增强**：  
   - 定义抽象基类（如`BaseModule`），规范模块开发流程（数据模型、接口、调度逻辑）。  
   - 实现插件化架构，支持通过配置动态加载新模块。  
3. **开发文档完善**：  
   - 新增《开发者指南》章节，说明新增模块步骤、代码规范及贡献流程。  
4. **测试与CI/CD**：  
   - 补充单元测试示例，使用`pytest`框架。  
   - 配置自动化测试流程（如GitHub Actions），确保代码稳定性。  


## 八、实施计划  
1. **第一阶段（20小时）**：完成项目的初始化，包括搭建Flask项目（2小时），配置Swagger（3小时）和Tree Cursor（3小时），设计MySQL数据库表结构（5小时）并编写数据库连接及基础操作封装代码（7小时）。  
2. **第二阶段（30小时）**：开发定时任务和体重数据模块。开发定时任务模块数据模型（3小时），实现调度逻辑（6小时）并编写相关接口（4小时）；开发体重数据模块数据模型（3小时），实现记录与查询功能（5小时），编写绘图逻辑（6小时）并完成模块接口（3小时）。  
3. **第三阶段（30小时）**：开发网格交易模块。开发数据模型（3小时），实现股票价格监控逻辑（7小时），编写策略相关接口（5小时），集成AI模型API获取投资建议（6小时），开发交易提醒功能（6小时）并完善模块接口（3小时）。  
4. **第四阶段（15小时）**：进行系统集成测试、调试和性能优化。编写单元测试用例（5小时），进行模块集成测试（4小时），调试修复问题（4小时）并优化系统性能（2小时）。  
5. **第五阶段（10小时）**：部署项目到服务器，包括配置服务器环境（3小时），部署项目代码（3小时），进行上线前检查（2小时）并完成上线操作（2小时）。  


## 九、贡献指南  
欢迎对本项目感兴趣的开发者贡献代码、提出建议或报告问题。如需参与开发，请遵循以下流程：  
1.  Fork本仓库并创建独立分支（命名规则：`feature/功能名称`或`fix/问题描述`）。  
2.  按照《开发者指南》（待补充）编写代码，确保功能测试通过。  
3.  提交Pull Request（PR）并说明变更内容，等待维护者审核合并。  


## 十、联系方式  
如有任何问题或建议，请联系 [你的联系方式]。

## 十一、当前进度
1. **项目初始化**：
   - 完成项目基础目录结构搭建
   - 创建核心模块目录（wechat、scheduler、weight、trading）
   - 设置基础配置文件

2. **开发进度**：
   - 已完成项目框架搭建
   - 已创建基础模块目录
   - 已设置配置文件结构

3. **下一步计划**：
   - 实现数据库连接配置
   - 开发微信消息处理模块
   - 实现定时任务基础功能